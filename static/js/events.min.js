let limit=20,offset=0,total=0,currentPage=0,testVal=500;const pageIdPatt=/page\-(\d+)/;function addClickListeners(){$("#next-btn").on("click",(function(t){t.preventDefault(),$(".page-btn.active").is(":last-child")||getEvents(offset+limit,limit,currentPage+1)})),$("#prev-btn").on("click",(function(t){t.preventDefault(),$(".page-btn.active").is(":first-child")||getEvents(offset-limit,limit,currentPage-1)})),$(".page-btn").on("click",(function(t){t.preventDefault();let e=parseInt(pageIdPatt.exec($(this).attr("id"))[1]);getEvents(limit*(e-1),limit,e)})),$(".delete-btn").on("click",(function(t){t.preventDefault();const e=$(this).siblings('input[type="hidden"]').val(),a=$(this).parents("td").siblings('td[colspan="3"').html();$.ajax({url:"music-fc-ajax.php",method:"post",data:{action:"delete-event",target:e,title:a},success:t=>{let e=parseInt(t);e>0?getEvents(offset,limit,currentPage):0==e?console.log("There was an error deleting the event."):alert("Target ID not set.")}})}))}function getEvents(t,e,a){$.ajax({url:"music-fc-ajax.php",method:"post",data:{action:"get-event",offset:t,limit:e},success:function(n){$(window).scrollTop(120),$("#events-table tbody").html(n),$(".page-btn").removeClass("active"),$("#page-"+a).addClass("active"),offset=t,currentPage=a,$("#start-idx").html(t+1),$("#end-idx").html(t+e<total?t+e:total)}})}function setInitialData(){offset=parseInt($("#start-idx").html())-1,limit=parseInt($("#limit").val()),total=parseInt($("#event-count").html()),currentPage=parseInt(pageIdPatt.exec($("#page-buttons .page-btn.active").attr("id"))[1])}$(document).ready((function(){setInitialData(),addClickListeners()}));