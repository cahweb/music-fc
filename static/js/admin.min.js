"use strict";const ajaxURL="music-fc-ajax.php";function addClickListeners(){addEditDeleteListeners(),$("#student-entry").on("submit",(function(t){t.preventDefault(),t.stopImmediatePropagation();let e=getFormData("student-entry");""==e.studentNID?alert("Please enter a student's NID."):(e.rawInput="From Admin Panel",adminUpdate(e,"add-swipe",()=>{alert("Student entry added successfully!")})),$("#student-entry-modal").modal("hide")})),$("#admin-level").on("submit",(function(t){t.preventDefault(),t.stopImmediatePropagation(),adminUpdate(getFormData("admin-level"),"admin-chg-priv",refreshAdminList),$("#edit-admin-modal").modal("hide")})),$("#student-entry-modal, #edit-admin-modal").on("hidden.bs.modal",(function(t){$("#student-entry .form-group div input").each((function(){"event"!=$(this).attr("id")&&$(this).val("")}))})),$("#swipe-display").on("submit",(function(t){t.preventDefault(),t.stopImmediatePropagation(),adminUpdate(getFormData("swipe-display"),"swipe-list",updateHTML,"result-div")})),$("#add-admin").on("submit",(function(t){t.preventDefault(),t.stopImmediatePropagation(),adminUpdate(getFormData("add-admin"),"admin-add",refreshAdminList),$("#add-admin-modal").modal("hide")})),$("#all-btn").on("click",(function(t){t.preventDefault();adminUpdate({},"swipe-list",updateHTML,"result-div")}))}function addEditDeleteListeners(){$(".edit-btn").on("click",(function(t){let e=parseInt($(this).parent().siblings("input").val());$("#edit-target").val(e)})),$(".delete-btn").on("click",(function(t){let e=parseInt($(this).parent().siblings("input").val()),n={};n.id=e,adminUpdate(n,"admin-delete",refreshAdminList)}))}function setupInputs(){$("#term-select").on("change",(function(){changeTerm()})),changeTerm()}function changeTerm(){const t=$("#term-select").val().split("-"),e={term:t[0],year:t[1]};console.log($("#term-select").siblings()),$("#term-select").siblings().each((function(){let t=$(this).attr("href").split("&")[0];for(const[n,a]of Object.entries(e))t+=`&${n}=${a}`;$(this).attr("href",t)}))}function adminUpdate(t,e,n=(()=>{}),...a){"function"==typeof n?(t.action=e,doAjax(t).then(t=>{switch(console.log(t),parseInt(t)){case 1:n();break;case 0:console.error("There was a problem with your request.");break;default:isNaN(parseInt(t))&&n(t,...a)}})):console.error('Parameter "callback" is not a function.')}function refreshAdminList(){doAjax({action:"admin-get-all"}).then(t=>{updateHTML(t,"admin-result")}),addEditDeleteListeners()}function getSwipeData(t){t.action="swipe-list",doAjax(t).then(t=>{updateHTML(t,"result-div")})}function getFormData(t){const e=$("#"+t).serializeArray();let n={};return e.forEach(t=>{n[t.name]=t.value}),n}function updateHTML(t,e){$("#"+e).html(t)}async function doAjax(t){let e="";try{e=await $.ajax({url:ajaxURL,method:"post",data:t})}catch(t){console.error(t)}return e}$(document).ready((function(){addClickListeners(),setupInputs()}));